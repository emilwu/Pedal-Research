# 用戶流程設計

本文件描述 MVP 版本中各核心功能的用戶流程與互動設計。

---

## 流程總覽

| 流程 | 需登入 | 涉及 AI |
|-----|-------|--------|
| A. 瀏覽設備數據庫 | 否 | 否 |
| B. 設備研究請求 | 是 | 是 |
| C. 管理個人清單 | 是 | 否 |
| D. 智慧配對 | 是 | 是 |
| E. 用戶註冊/登入 | - | 否 |

---

## 流程 A：瀏覽設備數據庫

### 情境
用戶想了解某個效果器的詳細規格和設定建議。

### 流程圖
```
┌─────────────────────────────────────────────────────────────┐
│                                                             │
│  進入首頁/數據庫頁                                            │
│        │                                                    │
│        ▼                                                    │
│  ┌──────────────┐                                          │
│  │  設備列表頁   │◄────────────────┐                        │
│  └──────┬───────┘                 │                        │
│         │                         │                        │
│    ┌────┴────┬────────┐          │                        │
│    ▼         ▼        ▼          │                        │
│  搜尋    切換分類   篩選條件       │                        │
│    │         │        │          │                        │
│    └────┬────┴────────┘          │                        │
│         ▼                         │                        │
│  顯示符合條件的設備                 │                        │
│         │                         │                        │
│         ▼                         │                        │
│  點選設備卡片                      │                        │
│         │                         │                        │
│         ▼                         │                        │
│  ┌──────────────┐                │                        │
│  │  設備詳情頁   │────────────────┘                        │
│  └──────┬───────┘   返回列表                               │
│         │                                                  │
│    ┌────┴────┐                                            │
│    ▼         ▼                                            │
│  加入清單  提交研究請求                                      │
│  (需登入)  (設備不存在時)                                    │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 頁面說明

**設備列表頁**
- 預設顯示：所有設備，依更新時間排序
- 分類標籤：全部 / 效果器 / 吉他 / 音箱
- 搜尋框：輸入即時過濾（品牌、型號、名稱）
- 篩選面板：
  - 品牌（多選）
  - 子類型（效果器：Compressor, Overdrive, Delay...）
- 每筆顯示：縮圖、名稱、品牌、類型標籤、簡介

**設備詳情頁**
- 基本資訊：品牌、型號、類型、簡介
- 詳細規格：依設備類型顯示不同欄位
- 設定建議：情境式設定推薦（附旋鈕值）
- 適合風格：標籤顯示
- 相關連結：官方網站
- 操作按鈕：
  - 「加入我的清單」（需登入）
  - 「返回列表」

---

## 流程 B：設備研究請求

### 情境
用戶想研究一個數據庫中沒有的新效果器。

### 前置條件
- 用戶已登入

### 流程圖
```
┌─────────────────────────────────────────────────────────────┐
│                                                             │
│  搜尋數據庫 → 找不到想要的設備                                │
│        │                                                    │
│        ▼                                                    │
│  點選「請求研究新設備」                                       │
│        │                                                    │
│        ▼                                                    │
│  ┌──────────────┐                                          │
│  │  研究請求表單 │                                          │
│  │              │                                          │
│  │ • 設備類型    │                                          │
│  │ • 品牌       │                                          │
│  │ • 型號       │                                          │
│  │ • 補充說明   │                                          │
│  └──────┬───────┘                                          │
│         │                                                  │
│         ▼                                                  │
│  ┌──────────────┐                                          │
│  │  系統檢查    │                                          │
│  │              │                                          │
│  │ • 是否已存在 │                                          │
│  │ • 是否排隊中 │                                          │
│  └──────┬───────┘                                          │
│         │                                                  │
│    ┌────┴────┐                                            │
│    ▼         ▼                                            │
│  已存在    可提交                                           │
│    │         │                                            │
│    ▼         ▼                                            │
│  顯示現有   確認提交                                        │
│  設備連結      │                                           │
│              ▼                                            │
│         加入排隊                                           │
│              │                                            │
│              ▼                                            │
│  ┌──────────────┐                                          │
│  │  排隊確認頁   │                                          │
│  │              │                                          │
│  │ • 排隊位置   │                                          │
│  │ • 預估時間   │                                          │
│  │ • 查看進度   │                                          │
│  └──────────────┘                                          │
│              │                                            │
│         [背景處理]                                          │
│              │                                            │
│              ▼                                            │
│  ┌──────────────┐                                          │
│  │  Email 通知  │                                          │
│  │              │                                          │
│  │ 研究完成！   │                                          │
│  │ 點此查看結果 │                                          │
│  └──────────────┘                                          │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 頁面說明

**研究請求表單**
- 設備類型：下拉選單（效果器/吉他/音箱）
- 品牌：文字輸入（附自動完成建議）
- 型號：文字輸入
- 補充說明：多行文字（選填）
- 提交按鈕

**排隊確認頁**
- 請求已接收提示
- 目前排隊位置
- 預估完成時間
- 「查看我的請求」連結
- 說明：完成後將發送 Email 通知

**我的請求列表**（個人中心內）
- 列表顯示所有歷史請求
- 每筆顯示：設備名稱、請求時間、狀態、操作
- 狀態：排隊中(含位置) / 處理中 / 完成 / 失敗
- 完成狀態：可點擊查看設備詳情

---

## 流程 C：管理個人清單

### 情境
用戶想建立自己擁有的設備清單，以便後續配對使用。

### 前置條件
- 用戶已登入

### 流程圖

**C1：從數據庫添加設備**
```
瀏覽數據庫 → 找到設備 → 設備詳情頁
                              │
                              ▼
                      點選「加入我的清單」
                              │
                              ▼
                       ┌──────────────┐
                       │  添加確認彈窗 │
                       │              │
                       │ • 顯示名稱   │
                       │ • 備註(選填) │
                       └──────┬───────┘
                              │
                              ▼
                         確認添加
                              │
                              ▼
                      顯示成功訊息
                      「已加入清單」
```

**C2：手動輸入設備**
```
進入「我的清單」頁
        │
        ▼
點選「手動添加設備」
        │
        ▼
 ┌──────────────┐
 │  手動添加表單 │
 │              │
 │ • 設備類型   │
 │ • 品牌      │
 │ • 型號      │
 │ • 子類型    │
 │ • 其他屬性  │
 │ • 備註      │
 └──────┬───────┘
        │
        ▼
   確認添加
        │
        ▼
  加入個人清單
```

**C3：管理清單**
```
進入「我的清單」頁
        │
        ▼
 ┌────────────────────────────────┐
 │        我的設備清單             │
 │                                │
 │  [效果器] [吉他] [音箱]  ←分類  │
 │                                │
 │  ┌──────────────────────┐     │
 │  │ 設備卡片              │     │
 │  │ • 名稱 • 品牌 • 型號  │     │
 │  │ [編輯] [刪除]        │     │
 │  └──────────────────────┘     │
 │         ...                   │
 │                                │
 │  [+ 從數據庫添加] [+ 手動添加] │
 └────────────────────────────────┘
```

### 頁面說明

**我的清單頁**
- 分類標籤：效果器 / 吉他 / 音箱
- 統計：各類數量
- 設備列表：卡片式顯示
- 操作：編輯、刪除
- 添加入口：從數據庫添加、手動添加

---

## 流程 D：智慧配對

### 情境
用戶想知道自己的設備如何搭配特定音樂風格。

### 前置條件
- 用戶已登入
- 今日配對額度未用完

### 流程圖
```
┌─────────────────────────────────────────────────────────────┐
│                                                             │
│  進入「智慧配對」                                             │
│        │                                                    │
│        ▼                                                    │
│  ┌──────────────┐                                          │
│  │  選擇配對模式 │                                          │
│  │              │                                          │
│  │ ○ 個人清單   │ ← 使用我擁有的設備                        │
│  │ ○ 假設性選擇 │ ← 模擬擁有某些設備                        │
│  └──────┬───────┘                                          │
│         │                                                  │
│    ┌────┴────┐                                            │
│    ▼         ▼                                            │
│ 個人清單   假設性選擇                                        │
│    │         │                                            │
│    ▼         ▼                                            │
│ 從清單選   從數據庫選                                        │
│    │         │                                            │
│    └────┬────┘                                            │
│         ▼                                                  │
│  ┌──────────────┐                                          │
│  │  設備選擇頁   │                                          │
│  │              │                                          │
│  │ 1. 選擇吉他  │ ← 必選                                   │
│  │ 2. 選擇音箱  │ ← 必選                                   │
│  │ 3. 選擇效果器│ ← 可多選，可不選                          │
│  └──────┬───────┘                                          │
│         │                                                  │
│         ▼                                                  │
│  ┌──────────────┐                                          │
│  │  風格選擇頁   │                                          │
│  │              │                                          │
│  │ 預設選項：   │                                          │
│  │ ○ Jazz      │                                          │
│  │ ○ Neo Soul  │                                          │
│  │ ○ Funk      │                                          │
│  │ ○ Post Rock │                                          │
│  │ ○ Fusion    │                                          │
│  │ ○ Blues     │                                          │
│  │ ○ 自定義 ───┼──► [輸入描述]                             │
│  └──────┬───────┘                                          │
│         │                                                  │
│         ▼                                                  │
│  ┌──────────────┐                                          │
│  │  額度檢查    │                                          │
│  └──────┬───────┘                                          │
│         │                                                  │
│    ┌────┴────┐                                            │
│    ▼         ▼                                            │
│  有額度    額度用完                                         │
│    │         │                                            │
│    ▼         ▼                                            │
│ 開始配對   顯示提示                                         │
│    │      「今日額度已用完                                  │
│    │       明天再試」                                      │
│    ▼                                                       │
│ [AI 計算中...]                                             │
│    │                                                       │
│    ▼                                                       │
│  ┌──────────────────────────────────────┐                 │
│  │           配對結果頁                  │                 │
│  │                                      │                 │
│  │  ┌─────────────────────────────┐    │                 │
│  │  │ 推薦 Compressor              │    │                 │
│  │  │ [設備名稱]                   │    │                 │
│  │  │ 建議設定：                   │    │                 │
│  │  │ • Threshold: -20dB          │    │                 │
│  │  │ • Ratio: 3:1                │    │                 │
│  │  │ • Mix: 80%                  │    │                 │
│  │  └─────────────────────────────┘    │                 │
│  │                                      │                 │
│  │  ┌─────────────────────────────┐    │                 │
│  │  │ 推薦 Overdrive              │    │                 │
│  │  │ [設備名稱]                   │    │                 │
│  │  │ 建議設定：...               │    │                 │
│  │  └─────────────────────────────┘    │                 │
│  │                                      │                 │
│  │  ... (EQ, Delay, Reverb)            │                 │
│  │                                      │                 │
│  │  ⚠️ 警告：缺少 Reverb 效果器        │                 │
│  │                                      │                 │
│  │  整體說明：                          │                 │
│  │  這個配置適合溫暖的 Jazz 音色...     │                 │
│  │                                      │                 │
│  │  [儲存結果] [重新配對] [返回]       │                 │
│  └──────────────────────────────────────┘                 │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 頁面說明

**配對模式選擇**
- 清楚說明兩種模式差異
- 個人清單模式：快速選擇已有設備
- 假設性模式：可探索未擁有的設備組合

**設備選擇頁**
- 吉他選擇：必選，單選
- 音箱選擇：必選，單選
- 效果器選擇：可多選，可不選
- 不選效果器時，AI 從數據庫推薦

**風格選擇頁**
- 預設選項快速選擇
- 自定義輸入框（選「自定義」時展開）
- 自定義描述例：「偏向 60 年代的復古搖滾」

**配對結果頁**
- 按效果器類型分區塊顯示
- 每個推薦包含：設備名稱、具體設定值、說明
- 警告區：缺少必要設備時顯示
- 整體說明：解釋配對邏輯
- 操作：儲存、重新配對

---

## 流程 E：用戶註冊/登入

### E1：註冊流程
```
點選「註冊」
     │
     ▼
┌──────────────┐
│   註冊表單    │
│              │
│ • Email     │
│ • 密碼      │
│ • 確認密碼  │
│ • 顯示名稱  │
└──────┬───────┘
       │
       ▼
  表單驗證
       │
  ┌────┴────┐
  ▼         ▼
驗證失敗   驗證成功
  │         │
  ▼         ▼
顯示錯誤   發送驗證信
       │
       ▼
  點擊信中連結
       │
       ▼
  帳號啟用完成
       │
       ▼
  自動登入
```

### E2：登入流程
```
點選「登入」
     │
     ▼
┌──────────────┐
│   登入表單    │
│              │
│ • Email     │
│ • 密碼      │
│              │
│ [忘記密碼？] │
└──────┬───────┘
       │
       ▼
  驗證帳密
       │
  ┌────┴────┐
  ▼         ▼
驗證失敗   驗證成功
  │         │
  ▼         ▼
顯示錯誤   登入成功
          跳轉至原頁面
```

### E3：密碼重設
```
點選「忘記密碼」
     │
     ▼
輸入 Email
     │
     ▼
發送重設連結
     │
     ▼
點擊信中連結
     │
     ▼
輸入新密碼
     │
     ▼
密碼重設完成
     │
     ▼
導向登入頁
```

---

## 通知設計

### Email 通知類型

| 類型 | 觸發時機 | 內容 |
|-----|---------|------|
| 註冊驗證 | 註冊後 | 驗證連結 |
| 密碼重設 | 請求重設 | 重設連結 |
| 研究完成 | AI 處理完成 | 設備名稱、查看連結 |
| 研究失敗 | AI 處理失敗 | 失敗原因、重新請求建議 |

---

## 錯誤處理

### 常見錯誤情境

| 情境 | 處理方式 |
|-----|---------|
| 未登入訪問需登入功能 | 顯示登入提示，登入後返回原頁面 |
| 配對額度用完 | 顯示友善提示，告知明日重設 |
| 研究請求重複 | 顯示現有設備或進行中請求 |
| AI 處理失敗 | Email 通知，提供重新請求選項 |
| 網路錯誤 | 顯示重試按鈕 |
